---
title: "BCB744 Task D"
format: 
  html:
    fig-format: png
    fig_retina: 2
    fig-dpi: 400
execute:
  dev: ragg_png
  fig-format: png
params: 
  hide_answers: false
---


![](/images/SAMOS-logo-transparent.png){width="35%"}

```{r code-brewing-opts, echo=FALSE}
knitr::opts_chunk$set(
  comment = "R>", 
  warning = FALSE, 
  message = FALSE,
  fig.width = 4.5,
  fig.height = 2.625,
  out.width = "75%",
  fig.asp = NULL, # control via width/height
  dpi = 300
)

ggplot2::theme_set(
  ggplot2::theme_minimal(base_size = 8)
)
ggplot2::theme_set(
  ggplot2::theme_bw(base_size = 8)
)
```

# [[Assessment Sheet](BCB744_Task_D_Surname.xlsx)]{.my-highlight} {#sec-assessment}

# 6–8. Tidy Data (Tidy / Tidier / Tidiest)

## Question 1
What are the key principles of tidy data? **(/3)**

::: {.callout-tip collapse="true"}
## Answer

- ✓ Each variable forms a column.
- ✓ Each observation forms a row.
- ✓ Each type of observational unit forms a table.
:::

## Question 2
Using the untidy data (`SACTN2`) and the tidy data (`SACTN2_tidy`), create line graphs, one for each of DEA, SAWS, and KZNSB, showing a time series of temperature. Ensure you have a column of three figures (ncol = 1). Use the fewest number of lines of code possible. You should end up with two graphs, each with three panels. **(/13)**

::: {.callout-tip collapse="true"}
## Answer

```{r fig-library-tidyverse, echo=TRUE, eval=TRUE, warning=FALSE, message=FALSE, fig.width=6, fig.asp=0.65, out.width="80%", fig.align='center'}
#| fig-cap: "SACTN2 temperature time series faceted by source."
library(tidyverse)
library(here)

load(here::here("data", "BCB744", "SACTN_mangled.RData"))

SACTN2_tidy <- pivot_longer(
  SACTN2,
  cols = c("DEA", "KZNSB", "SAWS"),
  names_to = "src",
  values_to = "temp"
)

# Starting with SACTN2 (untidy): tidy it on the fly, then plot
SACTN2 |> 
  pivot_longer(
    cols = c("DEA", "KZNSB", "SAWS"),
    names_to = "src",
    values_to = "temp"
  ) |> 
  ggplot(aes(x = date, y = temp)) +
  geom_line(aes(col = site, linetype = type)) +
  facet_wrap(~ src, ncol = 1) +
  labs(title = "Untidy (tidied in pipeline)", x = "Date", y = "Temperature (°C)")

# Starting with the already-tidy data

ggplot(data = SACTN2_tidy, aes(x = date, y = temp)) +
  geom_line(aes(col = site, linetype = type)) +
  facet_wrap(~ src, ncol = 1) +
  labs(title = "Already tidy", x = "Date", y = "Temperature (°C)")
```
:::
